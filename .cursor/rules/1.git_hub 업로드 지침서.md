반응형 웹과 하이브리드 앱을 배포, 리소스를 정리하기 위한 지침서 입니다.
개발 환경에 따라 판단하여 웹 또는 하이브리드 앱 지침에 맞춰 진행해주세요.
깃허브브에서 해당 리소스를 즉시 확인 할 수 있는 환경을 만들어주세요.


A. 반응형 웹: GitHub에서 빌드·배포·리소스 관리
0) 목표

단일 진입점 index.html 기반 SPA/MPA 반응형 웹.

GitHub Actions로 자동 빌드 → GitHub Pages로 배포.

정적 리소스는 레포 내 관리, 대용량은 Git LFS 사용.

1) 표준 디렉토리
web/
├─ public/                     # 빌드 없이 그대로 배포
│  ├─ assets/                  # 이미지/아이콘/폰트
│  ├─ favicon.ico
│  ├─ manifest.webmanifest     # PWA(선택)
│  └─ robots.txt
├─ src/
│  ├─ css/
│  │  ├─ style.css             # 전역 스타일(반응형 포함)
│  │  └─ components/           # 컴포넌트별 CSS(선택)
│  ├─ js/
│  │  ├─ main.js               # 엔트리
│  │  └─ modules/              # 모듈
│  └─ index.html               # 개발용 루트 HTML
├─ dist/                       # 빌드 산출물(자동 생성)
├─ package.json
└─ vite.config.ts|js           # 바닐라/Vite 둘 다 가능, Vite 권장

2) 반응형 기본 템플릿

src/index.html

<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>웹 반응형 데모</title>
  <meta name="description" content="GitHub Actions로 자동 배포되는 반응형 웹" />
  <link rel="icon" href="./assets/favicon.ico" />
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>
  <header class="container">
    <h1 class="brand">Project</h1>
    <nav class="nav">
      <a href="#home">홈</a>
      <a href="#features">기능</a>
      <a href="#contact">문의</a>
    </nav>
  </header>

  <main class="container grid">
    <section class="card">콘텐츠 1</section>
    <section class="card">콘텐츠 2</section>
    <section class="card">콘텐츠 3</section>
  </main>

  <footer class="container">© Project</footer>

  <script type="module" src="./js/main.js"></script>
</body>
</html>


src/css/style.css

/* 전역 레이아웃 및 반응형 그리드 */
:root { --maxw: 1200px; --pad: 16px; }
* { box-sizing: border-box; }
body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; line-height:1.5; }
.container { max-width: var(--maxw); margin: 0 auto; padding: 0 var(--pad); }
.brand { margin: 0.75rem 0; }
.nav a { margin-right: 1rem; text-decoration: none; }

.grid { display: grid; gap: 16px; grid-template-columns: repeat(12, 1fr); }
.card { background:#fff; border:1px solid #eee; border-radius:12px; padding:16px; box-shadow:0 2px 8px rgba(0,0,0,.04); grid-column: span 4; }

/* 반응형 분기점 */
@media (max-width: 1024px) {
  .card { grid-column: span 6; }
}
@media (max-width: 640px) {
  .grid { grid-template-columns: repeat(4, 1fr); }
  .card { grid-column: span 4; }
  .nav { display:flex; overflow:auto; }
}

/* 접근성 기본 */
:focus-visible { outline: 2px solid #000; outline-offset: 2px; }


src/js/main.js

// 한글 주석: 초기 렌더
document.addEventListener('DOMContentLoaded', () => {
  // 한글 주석: 초기화 로직 필요 시 여기에 작성
})

3) Vite 설정(권장)

vite.config.ts

import { defineConfig } from 'vite'

export default defineConfig({
  base: './',                 // 프로젝트 페이지에 안전
  build: { outDir: 'dist', sourcemap: true }
})


package.json

{
  "name": "web",
  "private": false,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview --open"
  },
  "devDependencies": {
    "vite": "^5.4.0"
  }
}

4) GitHub Actions: 웹 자동 배포

.github/workflows/web-pages.yml

name: Web Pages

on:
  push:
    branches: [ main ]
    paths:
      - "web/**"
      - ".github/workflows/web-pages.yml"
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "web-pages"
  cancel-in-progress: true

jobs:
  build:
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: web
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20 }
      - run: npm ci
      - run: npm run build
      - uses: actions/upload-pages-artifact@v3
        with:
          path: web/dist

  deploy:
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    steps:
      - id: deployment
        uses: actions/deploy-pages@v4


설정 절차

Settings → Pages → Source를 GitHub Actions로 지정.

main 브랜치에 푸시하면 web/dist가 자동으로 Pages에 배포.

프로젝트 페이지에서는 상대 경로 사용을 유지.

5) 리소스 저장 전략

소형 자산: web/public/assets/ 경로에 직접 저장.

대용량 파일(영상, 고해상도 이미지, 모델 파일 등): Git LFS 권장.

git lfs install
git lfs track "*.webm" "*.mp4" "*.zip" "*.bin"
git add .gitattributes
git add path/to/large.file
git commit -m "feat: add large assets via LFS"
git push

6) 품질 체크

Lighthouse 각 항목 90점 이상.

이미지 lazy-load, WebP/AVIF 사용.

폰트 서브셋팅과 font-display: swap.

SPA라면 404.html을 index.html 복제.

메타 태그와 manifest, service worker로 PWA 옵션 적용 가능.

B. 하이브리드 모바일 앱: GitHub에서 빌드·아티팩트 출력·리소스 관리
0) 목표

동일한 프런트 코드로 PWA + Capacitor 하이브리드 앱을 구성.

GitHub Actions에서 Android 빌드 아티팩트(APK/AAB) 출력.

iOS는 macOS 러너에서 아카이브 생성까지 자동화(서명은 별도 비밀키 필요).

1) 표준 디렉토리
app/
├─ public/
│  ├─ assets/
│  ├─ favicon.ico
│  ├─ manifest.webmanifest
│  └─ service-worker.js
├─ src/                      # 웹과 동일 구조 유지
│  ├─ css/style.css
│  ├─ js/main.js
│  └─ index.html
├─ dist/                     # 빌드 산출물
├─ capacitor.config.ts
├─ package.json
└─ scripts/                  # 빌드/서명 스크립트(선택)

2) PWA 필수 파일

public/manifest.webmanifest

{
  "name": "하이브리드 앱",
  "short_name": "앱",
  "start_url": "./index.html",
  "scope": "./",
  "display": "standalone",
  "background_color": "#ffffff",
  "theme_color": "#ffffff",
  "icons": [
    { "src": "./assets/icons/icon-192.png", "sizes": "192x192", "type": "image/png" },
    { "src": "./assets/icons/icon-512.png", "sizes": "512x512", "type": "image/png" }
  ]
}


public/service-worker.js

/* 한글 주석: 최소 캐싱 예제 */
const CACHE = 'app-cache-v1'
const ASSETS = [
  './',
  './index.html',
  './css/style.css',
  './js/main.js',
  './assets/favicon.ico'
]

self.addEventListener('install', e => {
  e.waitUntil(caches.open(CACHE).then(c => c.addAll(ASSETS)))
})

self.addEventListener('fetch', e => {
  e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)))
})


src/index.html에 등록 스니펫

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js')
  })
}
</script>

3) Capacitor 설정

capacitor.config.ts

import { CapacitorConfig } from '@capacitor/cli'

const config: CapacitorConfig = {
  appId: 'com.example.hybrid',
  appName: 'HybridApp',
  webDir: 'dist',
  bundledWebRuntime: false
}
export default config


package.json

{
  "name": "app",
  "private": false,
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "cap:init": "npx cap init com.example.hybrid HybridApp --web-dir=dist",
    "cap:sync": "npx cap sync",
    "cap:add:android": "npx cap add android",
    "cap:add:ios": "npx cap add ios",
    "cap:open:android": "npx cap open android",
    "cap:open:ios": "npx cap open ios"
  },
  "devDependencies": {
    "vite": "^5.4.0",
    "@capacitor/core": "^6.1.0",
    "@capacitor/cli": "^6.1.0"
  }
}

4) Android 빌드 CI

사전 준비

첫 실행은 로컬에서 npm run build && npx cap add android && npx cap sync로 android/ 생성.

keystore는 GitHub Secret으로 관리. 예: ANDROID_KEYSTORE_BASE64, ANDROID_KEYSTORE_PASSWORD, ANDROID_KEY_ALIAS, ANDROID_KEY_ALIAS_PASSWORD.

.github/workflows/app-android.yml

name: App Android

on:
  push:
    branches: [ main ]
    paths:
      - "app/**"
      - ".github/workflows/app-android.yml"
  workflow_dispatch:

jobs:
  build-android:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with: { node-version: 20 }

      - name: Install Android SDK
        uses: android-actions/setup-android@v3

      - name: Install deps
        working-directory: app
        run: |
          npm ci
          npm run build
          npx cap sync android

      - name: Decode keystore
        if: ${{ secrets.ANDROID_KEYSTORE_BASE64 != '' }}
        run: |
          echo "${{ secrets.ANDROID_KEYSTORE_BASE64 }}" | base64 -d > app/android/keystore.jks

      - name: Build APK with Gradle
        working-directory: app/android
        run: |
          ./gradlew wrapper
          ./gradlew assembleRelease \
            -Pandroid.injected.signing.store.file=keystore.jks \
            -Pandroid.injected.signing.store.password="${{ secrets.ANDROID_KEYSTORE_PASSWORD }}" \
            -Pandroid.injected.signing.key.alias="${{ secrets.ANDROID_KEY_ALIAS }}" \
            -Pandroid.injected.signing.key.password="${{ secrets.ANDROID_KEY_ALIAS_PASSWORD }}"

      - name: Upload APK
        uses: actions/upload-artifact@v4
        with:
          name: app-release-apk
          path: app/android/app/build/outputs/apk/release/*.apk


출력물은 Actions 아티팩트로 다운로드 가능. 스토어 배포는 별도 워크플로에서 Play Developer API 연동 권장.

5) iOS 빌드 CI(아카이브 생성)

macOS 러너 필요. 인증서는 GitHub Secrets로 관리. 실제 App Store 배포는 fastlane 등으로 분리.

.github/workflows/app-ios.yml

name: App iOS

on:
  workflow_dispatch:
  push:
    branches: [ main ]
    paths:
      - "app/**"
      - ".github/workflows/app-ios.yml"

jobs:
  build-ios:
    runs-on: macos-latest

    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 20 }

      - name: Install deps and build web
        working-directory: app
        run: |
          npm ci
          npm run build
          npx cap sync ios

      - name: Build Xcode archive
        working-directory: app/ios
        run: |
          xcodebuild -workspace App/App.xcworkspace \
            -scheme App \
            -configuration Release \
            -archivePath $PWD/build/App.xcarchive archive

      - name: Upload XCArchive
        uses: actions/upload-artifact@v4
        with:
          name: app-ios-archive
          path: app/ios/build/App.xcarchive

6) 리소스 저장 전략

공용 아이콘·이미지·폰트는 app/public/assets/ 에 저장.

대용량 자산은 Git LFS로 추적.

네이티브 전용 리소스(스플래시, 앱 아이콘)는 플랫폼 디렉토리(android/app/src/main/res/, ios/App/App/Assets.xcassets/)에서 관리.

7) 앱 품질 체크

오프라인 동작 경로 검증.

start_url, scope 상대 경로 유지.

다크 모드, 폰트 서브셋팅, 초기 로딩 최적화.

접근성(포커스, 콘트라스트, 대체텍스트) 점검.

C. 모노레포 운영: 웹과 앱 동시 관리
0) 루트 구조
repository-root/
├─ web/                      # 반응형 웹
├─ app/                      # 하이브리드 앱(PWA+Capacitor)
├─ .github/workflows/
│  ├─ web-pages.yml
│  ├─ app-android.yml
│  └─ app-ios.yml
└─ README.md

1) 공통 원칙

경로는 상대 경로 중심으로 유지.

빌드는 항상 dist 산출물 기준.

Pages 도메인은 web 전용으로 연결.

Android/iOS는 Actions 아티팩트로 배포 산출물 생성.

대용량 리소스는 Git LFS.

환경변수는 GitHub Secrets로 주입.

2) 개발·배포 흐름

로컬 개발: 각각 web/, app/에서 npm run dev.

품질 점검: Lighthouse, 접근성 검사.

main 브랜치 푸시 → Web은 Pages 자동 배포, App은 빌드 아티팩트 생성.

D. 자주 막히는 포인트 정리

문제: 프로젝트 페이지에서 이미지가 보이지 않음
해결: 경로를 ./assets/... 형태의 상대 경로로 통일.

문제: SPA 새로고침 404
해결: dist/index.html을 dist/404.html로 복제하거나 해시 라우팅 사용.

문제: 캐시로 변경 사항 미반영
해결: 파일명 해시(Vite 기본), 또는 쿼리스트링 버전 사용.

문제: Android 서명 키 관리
해결: keystore는 base64 인코딩해 GitHub Secret으로 저장하고 워크플로에서 디코드.

문제: iOS 빌드 실패
해결: macOS 러너 사용, Xcode 버전 확인, 서명·프로비저닝은 별도 보안 워크플로에서 처리.